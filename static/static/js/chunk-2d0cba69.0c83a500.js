(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cba69"],{"4b27":function(a,t,e){"use strict";e.r(t);var i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"app-container"},[e("el-form",{attrs:{inline:!0,size:"small"}},[e("el-form-item",[e("el-input",{attrs:{placeholder:"请输入名称"},model:{value:a.urlName,callback:function(t){a.urlName=t},expression:"urlName"}})],1),a._v(" "),e("el-form-item",[e("el-button",{on:{click:a.getUrlByName}},[a._v("查询")])],1),a._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:a.addClick}},[a._v("添加")])],1),a._v(" "),e("el-form-item",{staticStyle:{float:"right"}},[e("el-card",{staticClass:"box-card",staticStyle:{width:"250px",height:"70px","margin-left":"90px"}},[e("span",{staticStyle:{"margin-left":"15px"}},[a._v("端口："+a._s(a.port))]),a._v(" "),e("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:a.editPort}},[a._v("修改")])],1)],1),a._v(" "),e("el-form-item",{staticStyle:{float:"right"}},[e("el-card",{staticClass:"box-card",staticStyle:{width:"650px",height:"70px","margin-left":"90px"}},[e("span",{staticStyle:{"margin-left":"15px"}},[a._v("数据库驱动："+a._s(a.databaseData.driverName))]),a._v(" "),e("span",{staticStyle:{"margin-left":"15px"}},[a._v("数据库："+a._s(a.databaseData.dataSourceName))]),a._v(" "),e("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:a.editDatabase}},[a._v("修改")])],1)],1)],1),a._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.listLoading,expression:"listLoading"}],attrs:{data:a.urlData,border:"",stripe:""}},[e("el-table-column",{attrs:{prop:"date",label:"序号",type:"index",width:"60",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{prop:"name",label:"名称",width:"150",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{label:"类型",width:"100",align:"center"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("span",[a._v(a._s(a.TYPE[t.row.type]))])]}}])}),a._v(" "),e("el-table-column",{attrs:{prop:"remark",label:"说明",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{prop:"content",label:"内容",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{label:"操作",fixed:"right",width:"260px",align:"center"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return a.editRow(t.row,t.row.id)}}}),a._v(" "),e("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return a.deleteRow(t.row.id)}}})]}}])})],1),a._v(" "),e("div",[e("el-pagination",{attrs:{"current-page":a.currentPage,"page-sizes":[5,10,15,20],"page-size":a.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:a.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange,"update:currentPage":function(t){a.currentPage=t},"update:current-page":function(t){a.currentPage=t},"update:pageSize":function(t){a.pageSize=t},"update:page-size":function(t){a.pageSize=t}}})],1),a._v(" "),e("el-dialog",{attrs:{visible:a.dialogVisible,title:"请填写信息",width:"30%"},on:{"update:visible":function(t){a.dialogVisible=t}}},[e("el-form",{attrs:{"label-position":"right","label-width":"50px",model:a.dialogData}},[e("el-form-item",{attrs:{label:"名称"}},[e("el-input",{attrs:{placeholder:"请输入名称"},model:{value:a.dialogData.name,callback:function(t){a.$set(a.dialogData,"name",t)},expression:"dialogData.name"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"类型"}},[e("div",{staticStyle:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04)","padding-left":"9px"}},[e("el-radio",{attrs:{label:"SELECT"},model:{value:a.dialogData.type,callback:function(t){a.$set(a.dialogData,"type",t)},expression:"dialogData.type"}},[a._v("查询")]),a._v(" "),e("el-radio",{attrs:{label:"SELECT_ALL"},model:{value:a.dialogData.type,callback:function(t){a.$set(a.dialogData,"type",t)},expression:"dialogData.type"}},[a._v("查询所有")]),a._v(" "),e("el-radio",{attrs:{label:"SELECT_PARAM"},model:{value:a.dialogData.type,callback:function(t){a.$set(a.dialogData,"type",t)},expression:"dialogData.type"}},[a._v("条件查询")])],1),a._v(" "),e("div",{staticStyle:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04)","padding-left":"9px","margin-top":"9px"}},[e("el-radio",{attrs:{label:"INSERT"},model:{value:a.dialogData.type,callback:function(t){a.$set(a.dialogData,"type",t)},expression:"dialogData.type"}},[a._v("添加")]),a._v(" "),e("el-radio",{attrs:{label:"INSERT_LIST"},model:{value:a.dialogData.type,callback:function(t){a.$set(a.dialogData,"type",t)},expression:"dialogData.type"}},[a._v("添加多条")]),a._v(" "),e("el-radio",{attrs:{label:"INSERT_MANY"},model:{value:a.dialogData.type,callback:function(t){a.$set(a.dialogData,"type",t)},expression:"dialogData.type"}},[a._v("多表添加")])],1),a._v(" "),e("div",{staticStyle:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04)","padding-left":"9px","margin-top":"9px"}},[e("el-radio",{attrs:{label:"UPDATE"},model:{value:a.dialogData.type,callback:function(t){a.$set(a.dialogData,"type",t)},expression:"dialogData.type"}},[a._v("更新")])],1),a._v(" "),e("div",{staticStyle:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04)","padding-left":"9px","margin-top":"9px"}},[e("el-radio",{attrs:{label:"DELETE"},model:{value:a.dialogData.type,callback:function(t){a.$set(a.dialogData,"type",t)},expression:"dialogData.type"}},[a._v("删除")])],1)]),a._v(" "),e("el-form-item",{attrs:{label:"说明"}},[e("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入说明"},model:{value:a.dialogData.remark,callback:function(t){a.$set(a.dialogData,"remark",t)},expression:"dialogData.remark"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"内容"}},[e("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:a.dialogData.content,callback:function(t){a.$set(a.dialogData,"content",t)},expression:"dialogData.content"}})],1),a._v(" "),e("div",{staticClass:"text-c"},[e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:a.submitClick}},[a._v("确定")]),a._v(" "),e("el-button",{attrs:{type:"info",size:"medium"},on:{click:a.cancel}},[a._v("取消")])],1)],1)],1),a._v(" "),e("el-dialog",{attrs:{visible:a.portDialogVisible,title:"修改端口配置",width:"30%"},on:{"update:visible":function(t){a.portDialogVisible=t}}},[e("el-form",{attrs:{"label-position":"right","label-width":"99px",model:a.portDialogData}},[e("el-form-item",{attrs:{label:"端口："}},[e("el-input",{attrs:{placeholder:"请输入端口号"},model:{value:a.portDialogData,callback:function(t){a.portDialogData=t},expression:"portDialogData"}})],1),a._v(" "),e("div",{staticClass:"text-c"},[e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:a.submitClickPort}},[a._v("确定")]),a._v(" "),e("el-button",{attrs:{type:"info",size:"medium"},on:{click:a.cancelPort}},[a._v("取消")])],1)],1)],1),a._v(" "),e("el-dialog",{attrs:{visible:a.databaseDialogVisible,title:"修改数据库配置",width:"30%"},on:{"update:visible":function(t){a.databaseDialogVisible=t}}},[e("el-form",{attrs:{"label-position":"right","label-width":"99px",model:a.databaseDialogData}},[e("el-form-item",[e("el-radio-group",{on:{change:a.changeDatabaseRadio},model:{value:a.databaseDialogData.type,callback:function(t){a.$set(a.databaseDialogData,"type",t)},expression:"databaseDialogData.type"}},[e("el-radio",{attrs:{label:1}},[a._v("sqlite3")]),a._v(" "),e("el-radio",{attrs:{label:2}},[a._v("mysql")])],1)],1),a._v(" "),e("el-form-item",{attrs:{label:"数据库驱动："}},[e("el-input",{attrs:{placeholder:"请输入数据库驱动"},model:{value:a.databaseDialogData.driverName,callback:function(t){a.$set(a.databaseDialogData,"driverName",t)},expression:"databaseDialogData.driverName"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"数据库："}},[e("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入数据库配置"},model:{value:a.databaseDialogData.dataSourceName,callback:function(t){a.$set(a.databaseDialogData,"dataSourceName",t)},expression:"databaseDialogData.dataSourceName"}})],1),a._v(" "),e("div",{staticClass:"text-c"},[e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:a.submitClickDatabase}},[a._v("确定")]),a._v(" "),e("el-button",{attrs:{type:"info",size:"medium"},on:{click:a.cancelDatabase}},[a._v("取消")])],1)],1)],1)],1)},l=[],o=(e("cc57"),e("b775")),s="";function r(a,t){return Object(o["a"])({url:"".concat(s,"/np-sys/allUrl/").concat(a,"/").concat(t),method:"get"})}function n(a,t,e){return Object(o["a"])({url:"".concat(s,"/np-sys/listByName/").concat(t,"/").concat(e),method:"get",params:a})}function c(a){return Object(o["a"])({url:"".concat(s,"/np-sys/addUrl"),method:"post",data:a})}function d(a){return Object(o["a"])({url:"".concat(s,"/np-sys/modifyUrl"),method:"put",data:a})}function g(a){return Object(o["a"])({url:"".concat(s,"/np-sys/delUrl/").concat(a),method:"delete"})}function u(){return Object(o["a"])({url:"".concat(s,"/np-sys/database"),method:"get"})}function p(a){return Object(o["a"])({url:"".concat(s,"/np-sys/database"),method:"put",data:a})}function m(a){return Object(o["a"])({url:"".concat(s,"/np-sys/port"),method:"put",data:a})}var b={data:function(){return{urlName:"",switchValue:!1,classOptions:[],total:0,currentPage:1,pageSize:10,listLoading:!1,options:[{value:1,label:"test"}],urlData:[],TYPE:{SELECT:"查询",INSERT:"添加",UPDATE:"更新",DELETE:"删除",INSERT_LIST:"添加多条",INSERT_MANY:"多表添加",SELECT_ALL:"查询所有",SELECT_PARAM:"条件查询"},isGetUrlByName:!1,dialogVisible:!1,dialogData:{},portDialogVisible:!1,port:"",portDialogData:"",databaseDialogVisible:!1,databaseDialogData:{},idEdit:-1,databaseData:{driverName:"mysql",dataSourceName:"root:123456@tcp(127.0.0.1:3306)/iris?charset=utf8"}}},created:function(){},mounted:function(){this.getAllUrl(this.currentPage-1,this.pageSize),this.getDatabase()},beforeDestroy:function(){},methods:{handleSizeChange:function(){this.isGetUrlByName?this.goUrlByName({name:"%"+this.urlName+"%"},this.currentPage-1,this.pageSize):this.getAllUrl(this.currentPage-1,this.pageSize)},handleCurrentChange:function(){this.isGetUrlByName?this.goUrlByName({name:"%"+this.urlName+"%"},this.currentPage-1,this.pageSize):this.getAllUrl(this.currentPage-1,this.pageSize)},getAllUrl:function(a,t){var e=this;r(a,t).then((function(a){e.urlData=a.data.Data,e.total=a.data.Total,e.isGetUrlByName=!1})).catch((function(a){e.$message.error(a)}))},getDatabase:function(){var a=this;u().then((function(t){a.databaseData=t.data.datasource,a.port=t.data.port,"sqlite3"===a.databaseData.driverName&&(a.databaseData.type=1),"mysql"===a.databaseData.driverName&&(a.databaseData.type=2)})).catch((function(t){a.$message.error(t)}))},getUrlByName:function(){void 0===this.urlName||""===this.urlName?this.getAllUrl(this.currentPage-1,this.pageSize):(this.currentPage=1,this.goUrlByName({name:"%"+this.urlName+"%"},0,this.pageSize))},goUrlByName:function(a,t,e){var i=this;n(a,t,e).then((function(a){i.urlData=a.data.Data,i.total=a.data.Total,i.isGetUrlByName=!0})).catch((function(a){i.$message.error(a)}))},addClick:function(){this.dialogData={type:"SELECT"},this.idEdit=-1,this.dialogVisible=!0},editRow:function(a,t){this.dialogData=Object.assign({},a),delete this.dialogData.create_time,this.dialogData.update_time=(new Date).getTime(),this.dialogData.id=parseInt(this.dialogData.id),this.idEdit=t,this.dialogVisible=!0},cancel:function(){this.dialogVisible=!1,this.dialogData={}},submitClick:function(){var a=this;if(-1===this.idEdit){if(void 0===this.dialogData.name||void 0===this.dialogData.content||""===this.dialogData.name||""===this.dialogData.content)return void this.$message.warning("名称和内容不能为空");this.dialogData.create_time=(new Date).getTime(),this.dialogData.create_by="sys",c(this.dialogData).then((function(t){a.dialogVisible=!1,a.$message.success("添加成功"),a.getAllUrl(a.currentPage-1,a.pageSize)})).catch((function(t){a.$message.error(t)}))}else{if(void 0===this.dialogData.name||void 0===this.dialogData.content||""===this.dialogData.name||""===this.dialogData.content)return void this.$message.warning("名称和内容不能为空");this.dialogData.update_time=(new Date).getTime(),this.dialogData.update_by="sys",d(this.dialogData).then((function(t){a.dialogVisible=!1,a.$message.success("修改成功"),a.getAllUrl(a.currentPage-1,a.pageSize)})).catch((function(t){a.$message.error(t)}))}},deleteRow:function(a){var t=this;this.$confirm("此操作将删除该行, 是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){g(a).then((function(a){t.$message.success("删除成功"),t.getAllUrl(t.currentPage-1,t.pageSize)})).catch((function(a){t.$message.error(a)}))})).catch((function(){return t.$message.info("取消删除")}))},editPort:function(){this.portDialogData=this.port,this.portDialogVisible=!0},cancelPort:function(){this.portDialogVisible=!1,this.portDialogData=""},submitClickPort:function(){var a=this;/^\d+$/.test(this.portDialogData)?m({port:this.portDialogData}).then((function(t){a.portDialogVisible=!1,a.$message.success("修改成功，请重启服务器"),a.getAllUrl(a.currentPage-1,a.pageSize)})).catch((function(t){a.$message.error(t)})):this.$message.warning("请填写正确的端口号")},editDatabase:function(){this.databaseDialogData=Object.assign({},this.databaseData),this.databaseDialogVisible=!0},cancelDatabase:function(){this.databaseDialogVisible=!1,this.databaseDialogData={}},submitClickDatabase:function(){var a=this;void 0!==this.databaseDialogData.driverName&&void 0!==this.databaseDialogData.dataSourceName&&""!==this.databaseDialogData.driverName&&""!==this.databaseDialogData.dataSourceName?p(this.databaseDialogData).then((function(t){a.databaseDialogVisible=!1,a.$message.success("修改成功，请重启服务器"),a.getAllUrl(a.currentPage-1,a.pageSize)})).catch((function(t){a.$message.error(t)})):this.$message.warning("请将信息填写完整")},changeDatabaseRadio:function(){1===this.databaseDialogData.type&&(this.databaseDialogData.driverName="sqlite3",this.databaseDialogData.dataSourceName="./config/test.db"),2===this.databaseDialogData.type&&(this.databaseDialogData.driverName="mysql",this.databaseDialogData.dataSourceName="root:123456@tcp(127.0.0.1:3306)/test?charset=utf8")}}},h=b,D=e("5511"),f=Object(D["a"])(h,i,l,!1,null,"7499f108",null);t["default"]=f.exports}}]);